{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title":{"text":"Field of trade of apprenticeship",
  "fontSize":24},
  "width":"container",
  "height":300,
  "data":{
    "url": "https://raw.githubusercontent.com/blim0028/FIT3179Studio/refs/heads/main/Assignment2/data/field_of_trade.csv"
  },
  "transform": [
    {"filter":"datum.FieldOfTrade != 'Total'"},
    {"calculate": "parseFloat(datum.Proportion)", "as": "newProportion"}]
  ,
  "layer": [
    {
      "mark":{
        "type": "arc", "innerRadius":20, "stroke":"darkgrey"
      }
    },
    {
      "mark":{
        "type": "text", "radiusOffset":30,
        "fontSize":18
      },
      "encoding": {
        "text":{
          "field":"newProportion", "type": "quantitative",
        "format": ".1f"
        }
      }
    }
  ], 
  "encoding": {
    "theta": {
      "field":"newProportion", 
      "type":"quantitative",
      "stack":true},
    "color": {
      "field":"FieldOfTrade",
      "type":"nominal",
      "title":"Field Of Trade",
      "scale": {
        "domain": ["Construction", "Automotive and engineering", "Other"],
        "range":"category"
      },
      "condition":{
        "test": "datum.FieldOfTrade == 'Food' || datum.FieldOfTrade == 'Hairdressing' || datum.FieldOfTrade == 'Other technicians and trades' || datum.FieldOfTrade == 'Electrotechnology and telecommunications'", "value":"lightgray"
      }
    },
    "radius": {
      "field":"newProportion",
      "scale":{
        "type": "sqrt",
        "zero":true,
        "rangeMin":40
      }
      
    },
    "tooltip":[
      {"field":"FieldOfTrade", "title":"Field Of Trade"},
      {"field":"newProportion", "title":"Number of Students (%)", "format":".1f"}
    ]
  },
  "config": {
    "legend": {
      "labelFontSize":12,
      "titleFontSize":16,
      "labelLimit":300
    }
  }
  
}